<div
  class="flex justify-center items-center min-h-screen p-4"
  data-testid="login-1-login-container"
  >
  <div class="w-full max-w-md" data-testid="login-1-login-card">
    <p-card [styleClass]="'login-1-card'" data-testid="login-1-login-card-header">
      <ng-template pTemplate="header">
        <div class="p-4 text-white text-center" data-testid="login-1-login-header">
          <h2 class="text-2xl font-bold m-0" data-testid="login-1-login-title">{{ title }}</h2>
          <p class="text-sm opacity-80 mt-1 mb-0" data-testid="login-1-login-subtitle">
            Sign in to access your account
          </p>
        </div>
      </ng-template>

      <div class="px-4 py-6" data-testid="login-1-login-form-container">
        <form (ngSubmit)="onSubmit()" [formGroup]="loginForm" data-testid="login-1-login-form">
          <!-- Username field -->
          <div class="mb-4" data-testid="login-1-username-field">
            <label for="username" class="block text-sm font-medium text-gray-700 mb-2">
              Username or Email
            </label>
            <span class="p-input-icon-left w-full">
              <i class="pi pi-user"></i>
              <input
                id="username"
                type="text"
                pInputText
                formControlName="username"
                placeholder="Enter your username or email"
                class="w-full"
                data-testid="login-1-username-input"
                [autofocus]="true"
              />
            </span>
            @if (loginForm.controls['username'].invalid && (loginForm.controls['username'].dirty || loginForm.controls['username'].touched || submitted)) {
              <small class="text-red-500" data-testid="login-1-username-error">
                Please enter a valid username or email
              </small>
            }
          </div>

          <!-- Password field -->
          <div class="mb-4" data-testid="login-1-password-field">
            <label for="password" class="block text-sm font-medium text-gray-700 mb-2">
              Password
            </label>
            <span class="p-input-icon-left w-full">
              <i class="pi pi-lock"></i>
              <p-password
                id="password"
                formControlName="password"
                placeholder="Enter your password"
                [toggleMask]="true"
                [feedback]="false"
                styleClass="w-full"
                [inputStyleClass]="'w-full'"
                data-testid="login-1-password-input"
              />
            </span>
            @if (loginForm.controls['password'].invalid && (loginForm.controls['password'].dirty || loginForm.controls['password'].touched || submitted)) {
              <small class="text-red-500" data-testid="login-1-password-error">
                Password is required
              </small>
            }
          </div>

          <!-- Remember me & Forgot password section remains unchanged -->
          @if (features.showRememberMe) {
            <div
              class="flex justify-between items-center mb-4"
              data-testid="login-1-remember-me-section"
              >
              <div class="flex items-center">
                <p-checkbox
                  (onChange)="onRememberMeChange($event)"
                  [binary]="true"
                  data-testid="login-1-remember-me-checkbox"
                  formControlName="rememberMe"
                  id="rememberMe"
                  inputId="rememberMe"
                  />
                <label
                  class="ml-2 text-sm text-gray-600 cursor-pointer"
                  data-testid="login-1-remember-me-label"
                  for="rememberMe"
                  >Remember me</label
                  >
                </div>
                @if (features.showForgotPassword) {
                  <a
                    (click)="onForgotPassword()"
                    (keydown.enter)="onForgotPassword()"
                    class="text-sm cursor-pointer"
                    data-testid="login-1-forgot-password-link"
                    tabindex="0"
                    >
                    Forgot password?
                  </a>
                }
              </div>
            }

            <!-- Sign in button -->
            <button
              [loading]="loading"
              aria-label="Login"
              class="w-full p-3"
              data-testid="login-1-sign-in-button"
              icon="pi pi-sign-in"
              iconPos="right"
              label="Sign In"
              pButton
              type="submit"
            ></button>

            <!-- Register link section -->
            @if (features.showRegisterLink) {
              <div
                class="text-center mt-4"
                data-testid="login-1-register-link-section"
                >
                <p class="text-sm text-gray-600">
                  Don't have an account?
                  <a
                    (click)="onRegister()"
                    (keydown.enter)="onRegister()"
                    class="cursor-pointer"
                    data-testid="login-1-register-link"
                    tabindex="0"
                    >
                    Sign up now
                  </a>
                </p>
              </div>
            }

            <!-- Social login section -->
            @if (features.showSocialLogin) {
              <ng-container data-testid="login-1-social-login-section">
                <p-divider align="center" type="dashed">
                  <span class="text-xs text-gray-500">OR</span>
                </p-divider>
                <div class="flex gap-2 mt-4">
                  <button
                    (click)="onSocialLogin('google')"
                    (keydown.enter)="onSocialLogin('google')"
                    aria-label="Login with Google"
                    class="p-button-outlined flex-1"
                    data-testid="login-1-google-login-button"
                    icon="pi pi-google"
                    label="Google"
                    pButton
                    tabindex="0"
                    type="button"
                  ></button>
                  <button
                    (click)="onSocialLogin('facebook')"
                    (keydown.enter)="onSocialLogin('facebook')"
                    aria-label="Login with Facebook"
                    class="p-button-outlined flex-1"
                    data-testid="login-1-facebook-login-button"
                    icon="pi pi-facebook"
                    label="Facebook"
                    pButton
                    tabindex="0"
                    type="button"
                  ></button>
                </div>
              </ng-container>
            }
          </form>
        </div>
      </p-card>
    </div>
  </div>
